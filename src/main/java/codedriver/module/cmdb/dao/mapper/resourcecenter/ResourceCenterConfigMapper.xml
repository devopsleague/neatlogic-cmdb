<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Copyright(c) 2021 TechSure Co., Ltd. All Rights Reserved.
  ~ 本内容仅限于深圳市赞悦科技有限公司内部传阅，禁止外泄以及用于其他的商业项目。
  -->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="codedriver.module.cmdb.dao.mapper.resourcecenter.ResourceCenterConfigMapper">
    <cache type="codedriver.framework.dao.cache.CodeDriverCache" flushInterval="30000" size="100"></cache>
    <select id="getResourceCenterConfig"
            resultType="codedriver.framework.cmdb.dto.resourcecenter.config.ResourceCenterConfigVo">
        SELECT config
        FROM cmdb_resourcecenter_config
        WHERE id = 1
    </select>

    <insert id="insertResourceEntity"
            parameterType="codedriver.framework.cmdb.dto.resourcecenter.config.ResourceEntityVo">
        INSERT INTO cmdb_resourcecenter_entity (`name`, `label`, `status`, `error`, `init_time`)
        VALUES (#{name}, #{label}, #{status}, #{error}, NOW(3))
        ON DUPLICATE KEY UPDATE `error`     = #{error},
                                `status`    = #{status},
                                `init_time` = NOW(3)
    </insert>
</mapper>
